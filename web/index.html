<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud-Native Issue Tracker - Local Test</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <a href="#" class="header-logo">🇰🇪 Issue Tracker</a>
                <p class="header-title">Cloud-Native Issue Management</p>
            </div>
            <div class="header-right">
                <div class="account-menu" id="accountMenu">
                    <button class="account-button" onclick="toggleAccountMenu()">
                        <span>👤</span>
                        <span id="accountName">Account</span>
                        <span>▼</span>
                    </button>
                    <div class="account-dropdown" id="accountDropdown">
                        <a href="#" class="account-dropdown-item" onclick="showProfile()">👤 Profile</a>
                        <a href="#" class="account-dropdown-item" onclick="showSettings()">⚙️ Settings</a>
                        <a href="#" class="account-dropdown-item" onclick="logout()">🚪 Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Authentication Section -->
        <div id="authSection" class="auth-section active">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h2>🔐 Authentication</h2>
                        <p>Login or register to access the issue tracker</p>
                    </div>
                    
                    <div class="nav-tabs">
                        <div class="nav-tab active" onclick="switchTab('login')">Login</div>
                        <div class="nav-tab" onclick="switchTab('register')">Register</div>
                    </div>

                    <!-- Login Tab -->
                    <div id="loginTab" class="tab-content active">
                        <form class="auth-form" onsubmit="event.preventDefault(); login();">
                            <div class="form-group">
                                <label for="loginEmail">Email</label>
                                <input type="email" id="loginEmail" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" placeholder="Enter your password" required>
                            </div>
                            <div class="auth-buttons">
                                <button type="submit" class="btn-primary">🔑 Login</button>
                                <button type="button" onclick="demoLogin()" class="btn-secondary">🎭 Demo Login</button>
                            </div>
                        </form>
                    </div>

                    <!-- Register Tab -->
                    <div id="registerTab" class="tab-content">
                        <form class="auth-form" onsubmit="event.preventDefault(); register();">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="registerFirstName">First Name</label>
                                    <input type="text" id="registerFirstName" placeholder="First name" required>
                                </div>
                                <div class="form-group">
                                    <label for="registerLastName">Last Name</label>
                                    <input type="text" id="registerLastName" placeholder="Last name" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="registerEmail">Email</label>
                                <input type="email" id="registerEmail" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="registerPassword">Password</label>
                                <input type="password" id="registerPassword" placeholder="Min 8 characters" required>
                            </div>
                            <div class="form-group">
                                <label for="registerRole">Role</label>
                                <select id="registerRole">
                                    <option value="END_USER">End User</option>
                                    <option value="SUPPORT_STAFF">Support Staff</option>
                                    <option value="ADMIN">Admin</option>
                                </select>
                            </div>
                            <div class="auth-buttons">
                                <button type="submit" class="btn-primary">📝 Register</button>
                            </div>
                        </form>
                    </div>

                    <div id="authResponse" class="auth-response" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Main Application Section -->
        <div id="appSection" class="app-section">
            <!-- Navigation Menu -->
            <div class="nav-menu">
                <button class="nav-btn active" onclick="showDashboard()">📊 Dashboard</button>
                <button class="nav-btn" onclick="showIssues()">📋 Issues</button>
                <button class="nav-btn" onclick="showReports()">📈 Reports</button>
                <button class="nav-btn" onclick="showTeams()">👥 Teams</button>
                <button class="nav-btn" onclick="showIntegrations()">🔗 Integrations</button>
                <button class="nav-btn" onclick="showAPI()">🔧 API Testing</button>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="content-section active">
                <div class="dashboard-grid">
                    <div class="metric-card">
                        <div class="metric-icon">📊</div>
                        <div class="metric-content">
                            <h3>Total Issues</h3>
                            <div class="metric-value" id="totalIssues">0</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">🟢</div>
                        <div class="metric-content">
                            <h3>Open Issues</h3>
                            <div class="metric-value" id="openIssues">0</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">🟡</div>
                        <div class="metric-content">
                            <h3>In Progress</h3>
                            <div class="metric-value" id="inProgressIssues">0</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">🔴</div>
                        <div class="metric-content">
                            <h3>Critical Issues</h3>
                            <div class="metric-value" id="criticalIssues">0</div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-charts">
                    <div class="chart-card">
                        <h3>Issues by Status</h3>
                        <div id="statusChart" class="chart-container"></div>
                    </div>
                    <div class="chart-card">
                        <h3>Issues by Priority</h3>
                        <div id="priorityChart" class="chart-container"></div>
                    </div>
                </div>
            </div>

            <!-- Issues Section -->
            <div id="issuesSection" class="content-section">
                <div class="issues-container">
                    <div class="issues-header">
                        <h2>📋 Issue Management</h2>
                        <p>Create and manage issues through the enhanced interface</p>
                        
                        <!-- Enhanced Issue Form -->
                        <div class="issues-form">
                            <div class="form-group">
                                <label for="issueTitle">Title</label>
                                <input type="text" id="issueTitle" placeholder="Enter issue title" required>
                            </div>
                            <div class="form-group">
                                <label for="issueCategory">Category</label>
                                <select id="issueCategory">
                                    <option value="BUG">Bug</option>
                                    <option value="FEATURE">Feature Request</option>
                                    <option value="ENHANCEMENT">Enhancement</option>
                                    <option value="DOCUMENTATION">Documentation</option>
                                    <option value="SUPPORT">Support</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="issuePriority">Priority</label>
                                <select id="issuePriority">
                                    <option value="LOW">Low</option>
                                    <option value="MEDIUM" selected>Medium</option>
                                    <option value="HIGH">High</option>
                                    <option value="CRITICAL">Critical</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="issueAssignee">Assignee</label>
                                <select id="issueAssignee">
                                    <option value="">Unassigned</option>
                                    <option value="admin@example.com">Admin User</option>
                                    <option value="support@example.com">Support Staff</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="issueDescription">Description</label>
                            <textarea id="issueDescription" rows="4" placeholder="Enter detailed issue description" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="issueTags">Tags</label>
                            <input type="text" id="issueTags" placeholder="Enter tags separated by commas (e.g., frontend, bug, urgent)">
                        </div>
                        
                        <div class="form-group">
                            <label for="issueAttachments">Attachments</label>
                            <div class="file-upload">
                                <input type="file" id="issueAttachments" multiple accept=".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.txt">
                                <label for="issueAttachments" class="file-upload-label">
                                    📎 Choose files or drag and drop here
                                </label>
                            </div>
                        </div>
                        
                        <div class="issues-actions">
                            <button onclick="createIssue()" class="btn-primary">➕ Create Issue</button>
                            <button onclick="loadIssues()" class="btn-secondary">🔄 Refresh Issues</button>
                            <button onclick="exportIssues()" class="btn-secondary">📤 Export</button>
                        </div>
                    </div>
                    
                    <!-- Issues Table -->
                    <div class="issues-table-container">
                        <table class="issues-table" id="issuesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Title</th>
                                    <th>Category</th>
                                    <th>Priority</th>
                                    <th>Status</th>
                                    <th>Assignee</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="issuesTableBody">
                                <!-- Issues will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination" id="pagination">
                        <button class="pagination-button" onclick="previousPage()" id="prevBtn">← Previous</button>
                        <span class="pagination-info" id="pageInfo">Page 1 of 1</span>
                        <button class="pagination-button" onclick="nextPage()" id="nextBtn">Next →</button>
                    </div>
                </div>
            </div>

            <!-- Issue Details Modal -->
            <div id="issueModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="modalIssueTitle">Issue Details</h2>
                        <button class="modal-close" onclick="closeIssueModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <div class="issue-details-grid">
                            <!-- Issue Information -->
                            <div class="issue-info-section">
                                <h3>📋 Issue Information</h3>
                                <div class="issue-info-grid">
                                    <div class="info-item">
                                        <label>Status:</label>
                                        <select id="modalIssueStatus" onchange="updateIssueStatus()">
                                            <option value="OPEN">Open</option>
                                            <option value="IN_PROGRESS">In Progress</option>
                                            <option value="RESOLVED">Resolved</option>
                                            <option value="CLOSED">Closed</option>
                                        </select>
                                    </div>
                                    <div class="info-item">
                                        <label>Priority:</label>
                                        <select id="modalIssuePriority" onchange="updateIssuePriority()">
                                            <option value="LOW">Low</option>
                                            <option value="MEDIUM">Medium</option>
                                            <option value="HIGH">High</option>
                                            <option value="CRITICAL">Critical</option>
                                        </select>
                                    </div>
                                    <div class="info-item">
                                        <label>Assignee:</label>
                                        <select id="modalIssueAssignee" onchange="updateIssueAssignee()">
                                            <option value="">Unassigned</option>
                                            <option value="admin@example.com">Admin User</option>
                                            <option value="support@example.com">Support Staff</option>
                                        </select>
                                    </div>
                                    <div class="info-item">
                                        <label>Category:</label>
                                        <span id="modalIssueCategory">-</span>
                                    </div>
                                    <div class="info-item">
                                        <label>Created:</label>
                                        <span id="modalIssueCreated">-</span>
                                    </div>
                                    <div class="info-item">
                                        <label>Updated:</label>
                                        <span id="modalIssueUpdated">-</span>
                                    </div>
                                </div>
                                
                                <div class="issue-description">
                                    <h4>Description</h4>
                                    <p id="modalIssueDescription">-</p>
                                </div>
                                
                                <div class="issue-tags">
                                    <h4>Tags</h4>
                                    <div id="modalIssueTags" class="tags-container">-</div>
                                </div>
                                
                                <div class="issue-attachments">
                                    <h4>Attachments</h4>
                                    <div id="modalIssueAttachments" class="attachments-container">-</div>
                                </div>
                            </div>
                            
                            <!-- Comments Section -->
                            <div class="comments-section">
                                <h3>💬 Comments</h3>
                                <div class="comments-container" id="commentsContainer">
                                    <!-- Comments will be loaded here -->
                                </div>
                                
                                <div class="add-comment">
                                    <h4>Add Comment</h4>
                                    <textarea id="newCommentText" placeholder="Write your comment here..." rows="3"></textarea>
                                    <div class="comment-actions">
                                        <button onclick="addComment()" class="btn-primary">💬 Add Comment</button>
                                        <button onclick="addTimeEntry()" class="btn-secondary">⏱️ Add Time Entry</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Time Tracking Section -->
                            <div class="time-tracking-section">
                                <h3>⏱️ Time Tracking</h3>
                                <div class="time-summary">
                                    <div class="time-item">
                                        <label>Total Time:</label>
                                        <span id="totalTimeSpent">0h 0m</span>
                                    </div>
                                    <div class="time-item">
                                        <label>Estimated:</label>
                                        <span id="estimatedTime">-</span>
                                    </div>
                                </div>
                                
                                <div class="time-entries" id="timeEntriesContainer">
                                    <!-- Time entries will be loaded here -->
                                </div>
                                
                                <div class="start-timer">
                                    <button id="timerButton" onclick="toggleTimer()" class="btn-accent">▶️ Start Timer</button>
                                    <span id="timerDisplay" class="timer-display">00:00:00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button onclick="saveIssueChanges()" class="btn-primary">💾 Save Changes</button>
                        <button onclick="closeIssueModal()" class="btn-secondary">❌ Close</button>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reportsSection" class="content-section">
                <div class="reports-container">
                    <div class="reports-header">
                        <h2>📈 Advanced Reports & Analytics</h2>
                        <p>Generate comprehensive reports and analyze issue trends</p>
                    </div>

                    <!-- Report Filters -->
                    <div class="report-filters">
                        <div class="filter-group">
                            <label for="reportDateRange">Date Range:</label>
                            <select id="reportDateRange">
                                <option value="7">Last 7 days</option>
                                <option value="30" selected>Last 30 days</option>
                                <option value="90">Last 90 days</option>
                                <option value="365">Last year</option>
                                <option value="custom">Custom range</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="reportCategory">Category:</label>
                            <select id="reportCategory">
                                <option value="all">All Categories</option>
                                <option value="BUG">Bugs</option>
                                <option value="FEATURE">Features</option>
                                <option value="ENHANCEMENT">Enhancements</option>
                                <option value="DOCUMENTATION">Documentation</option>
                                <option value="SUPPORT">Support</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="reportAssignee">Assignee:</label>
                            <select id="reportAssignee">
                                <option value="all">All Assignees</option>
                                <option value="admin@example.com">Admin User</option>
                                <option value="support@example.com">Support Staff</option>
                                <option value="unassigned">Unassigned</option>
                            </select>
                        </div>
                        <button onclick="generateReport()" class="btn-primary">📊 Generate Report</button>
                    </div>

                    <!-- Report Types -->
                    <div class="report-types">
                        <div class="report-type-card" onclick="showReportType('summary')">
                            <div class="report-icon">📋</div>
                            <h3>Summary Report</h3>
                            <p>Overview of key metrics and trends</p>
                        </div>
                        <div class="report-type-card" onclick="showReportType('trends')">
                            <div class="report-icon">📈</div>
                            <h3>Trend Analysis</h3>
                            <p>Issue trends over time with charts</p>
                        </div>
                        <div class="report-type-card" onclick="showReportType('performance')">
                            <div class="report-icon">⚡</div>
                            <h3>Performance Report</h3>
                            <p>Resolution times and team performance</p>
                        </div>
                        <div class="report-type-card" onclick="showReportType('custom')">
                            <div class="report-icon">🔧</div>
                            <h3>Custom Report</h3>
                            <p>Build your own custom report</p>
                        </div>
                    </div>

                    <!-- Report Content -->
                    <div id="reportContent" class="report-content">
                        <!-- Summary Report -->
                        <div id="summaryReport" class="report-section">
                            <div class="report-header">
                                <h3>📋 Summary Report</h3>
                                <div class="report-actions">
                                    <button onclick="exportReport('pdf')" class="btn-secondary">📄 Export PDF</button>
                                    <button onclick="exportReport('csv')" class="btn-secondary">📊 Export CSV</button>
                                    <button onclick="exportReport('excel')" class="btn-secondary">📈 Export Excel</button>
                                </div>
                            </div>
                            
                            <div class="summary-metrics">
                                <div class="metric-row">
                                    <div class="metric-item">
                                        <h4>Total Issues</h4>
                                        <div class="metric-number" id="reportTotalIssues">0</div>
                                    </div>
                                    <div class="metric-item">
                                        <h4>Resolution Rate</h4>
                                        <div class="metric-number" id="reportResolutionRate">0%</div>
                                    </div>
                                    <div class="metric-item">
                                        <h4>Avg Resolution Time</h4>
                                        <div class="metric-number" id="reportAvgResolutionTime">0 days</div>
                                    </div>
                                    <div class="metric-item">
                                        <h4>Team Velocity</h4>
                                        <div class="metric-number" id="reportTeamVelocity">0 issues/week</div>
                                    </div>
                                </div>
                            </div>

                            <div class="report-charts">
                                <div class="chart-container">
                                    <h4>Issues by Status</h4>
                                    <div id="reportStatusChart" class="chart"></div>
                                </div>
                                <div class="chart-container">
                                    <h4>Issues by Priority</h4>
                                    <div id="reportPriorityChart" class="chart"></div>
                                </div>
                                <div class="chart-container">
                                    <h4>Issues by Category</h4>
                                    <div id="reportCategoryChart" class="chart"></div>
                                </div>
                                <div class="chart-container">
                                    <h4>Issues Over Time</h4>
                                    <div id="reportTimeChart" class="chart"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Trends Report -->
                        <div id="trendsReport" class="report-section" style="display: none;">
                            <div class="report-header">
                                <h3>📈 Trend Analysis</h3>
                                <div class="report-actions">
                                    <button onclick="exportReport('pdf')" class="btn-secondary">📄 Export PDF</button>
                                    <button onclick="exportReport('csv')" class="btn-secondary">📊 Export CSV</button>
                                </div>
                            </div>
                            
                            <div class="trends-charts">
                                <div class="chart-container full-width">
                                    <h4>Issue Volume Trends</h4>
                                    <div id="trendsVolumeChart" class="chart"></div>
                                </div>
                                <div class="chart-container">
                                    <h4>Resolution Time Trends</h4>
                                    <div id="trendsResolutionChart" class="chart"></div>
                                </div>
                                <div class="chart-container">
                                    <h4>Priority Distribution Trends</h4>
                                    <div id="trendsPriorityChart" class="chart"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Report -->
                        <div id="performanceReport" class="report-section" style="display: none;">
                            <div class="report-header">
                                <h3>⚡ Performance Report</h3>
                                <div class="report-actions">
                                    <button onclick="exportReport('pdf')" class="btn-secondary">📄 Export PDF</button>
                                    <button onclick="exportReport('csv')" class="btn-secondary">📊 Export CSV</button>
                                </div>
                            </div>
                            
                            <div class="performance-metrics">
                                <div class="performance-grid">
                                    <div class="performance-card">
                                        <h4>Team Performance</h4>
                                        <div id="teamPerformanceChart" class="chart"></div>
                                    </div>
                                    <div class="performance-card">
                                        <h4>Resolution Time by Category</h4>
                                        <div id="resolutionTimeChart" class="chart"></div>
                                    </div>
                                    <div class="performance-card">
                                        <h4>Workload Distribution</h4>
                                        <div id="workloadChart" class="chart"></div>
                                    </div>
                                    <div class="performance-card">
                                        <h4>SLA Compliance</h4>
                                        <div id="slaChart" class="chart"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Custom Report -->
                        <div id="customReport" class="report-section" style="display: none;">
                            <div class="report-header">
                                <h3>🔧 Custom Report Builder</h3>
                            </div>
                            
                            <div class="custom-report-builder">
                                <div class="builder-filters">
                                    <h4>Select Filters</h4>
                                    <div class="filter-options">
                                        <label><input type="checkbox" value="status"> Status</label>
                                        <label><input type="checkbox" value="priority"> Priority</label>
                                        <label><input type="checkbox" value="category"> Category</label>
                                        <label><input type="checkbox" value="assignee"> Assignee</label>
                                        <label><input type="checkbox" value="date"> Date Range</label>
                                        <label><input type="checkbox" value="tags"> Tags</label>
                                    </div>
                                </div>
                                
                                <div class="builder-charts">
                                    <h4>Select Chart Types</h4>
                                    <div class="chart-options">
                                        <label><input type="checkbox" value="pie"> Pie Chart</label>
                                        <label><input type="checkbox" value="bar"> Bar Chart</label>
                                        <label><input type="checkbox" value="line"> Line Chart</label>
                                        <label><input type="checkbox" value="table"> Data Table</label>
                                    </div>
                                </div>
                                
                                <button onclick="buildCustomReport()" class="btn-primary">🔨 Build Report</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teams Section -->
            <div id="teamsSection" class="content-section">
                <div class="teams-container">
                    <div class="teams-header">
                        <h2>👥 Team Management</h2>
                        <p>Manage teams, roles, and permissions for enterprise collaboration</p>
                    </div>

                    <!-- Team Management Tabs -->
                    <div class="teams-tabs">
                        <div class="tab-button active" onclick="switchTeamTab('teams')">🏢 Teams</div>
                        <div class="tab-button" onclick="switchTeamTab('members')">👤 Members</div>
                        <div class="tab-button" onclick="switchTeamTab('roles')">🔐 Roles</div>
                        <div class="tab-button" onclick="switchTeamTab('departments')">🏛️ Departments</div>
                    </div>

                    <!-- Teams Tab -->
                    <div id="teamsTab" class="team-tab-content active">
                        <div class="teams-actions">
                            <button onclick="openCreateTeamModal()" class="btn-primary">➕ Create Team</button>
                            <button onclick="refreshTeams()" class="btn-secondary">🔄 Refresh</button>
                        </div>

                        <div class="teams-grid" id="teamsGrid">
                            <!-- Teams will be loaded here -->
                        </div>
                    </div>

                    <!-- Members Tab -->
                    <div id="membersTab" class="team-tab-content">
                        <div class="members-actions">
                            <button onclick="openInviteMemberModal()" class="btn-primary">📧 Invite Member</button>
                            <button onclick="refreshMembers()" class="btn-secondary">🔄 Refresh</button>
                        </div>

                        <div class="members-table-container">
                            <table class="members-table" id="membersTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Team</th>
                                        <th>Department</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="membersTableBody">
                                    <!-- Members will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Roles Tab -->
                    <div id="rolesTab" class="team-tab-content">
                        <div class="roles-actions">
                            <button onclick="openCreateRoleModal()" class="btn-primary">➕ Create Role</button>
                            <button onclick="refreshRoles()" class="btn-secondary">🔄 Refresh</button>
                        </div>

                        <div class="roles-grid" id="rolesGrid">
                            <!-- Roles will be loaded here -->
                        </div>
                    </div>

                    <!-- Departments Tab -->
                    <div id="departmentsTab" class="team-tab-content">
                        <div class="departments-actions">
                            <button onclick="openCreateDepartmentModal()" class="btn-primary">➕ Create Department</button>
                            <button onclick="refreshDepartments()" class="btn-secondary">🔄 Refresh</button>
                        </div>

                        <div class="departments-grid" id="departmentsGrid">
                            <!-- Departments will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Management Modals -->
            
            <!-- Create Team Modal -->
            <div id="createTeamModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>➕ Create New Team</h2>
                        <button class="modal-close" onclick="closeCreateTeamModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="createTeamForm">
                            <div class="form-group">
                                <label for="teamName">Team Name</label>
                                <input type="text" id="teamName" placeholder="Enter team name" required>
                            </div>
                            <div class="form-group">
                                <label for="teamDescription">Description</label>
                                <textarea id="teamDescription" rows="3" placeholder="Enter team description"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="teamDepartment">Department</label>
                                <select id="teamDepartment">
                                    <option value="">Select Department</option>
                                    <option value="engineering">Engineering</option>
                                    <option value="design">Design</option>
                                    <option value="product">Product</option>
                                    <option value="support">Support</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="teamLead">Team Lead</label>
                                <select id="teamLead">
                                    <option value="">Select Team Lead</option>
                                    <option value="admin@example.com">Admin User</option>
                                    <option value="support@example.com">Support Staff</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="createTeam()" class="btn-primary">➕ Create Team</button>
                        <button onclick="closeCreateTeamModal()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Invite Member Modal -->
            <div id="inviteMemberModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>📧 Invite Team Member</h2>
                        <button class="modal-close" onclick="closeInviteMemberModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="inviteMemberForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="inviteFirstName">First Name</label>
                                    <input type="text" id="inviteFirstName" placeholder="First name" required>
                                </div>
                                <div class="form-group">
                                    <label for="inviteLastName">Last Name</label>
                                    <input type="text" id="inviteLastName" placeholder="Last name" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inviteEmail">Email</label>
                                <input type="email" id="inviteEmail" placeholder="Enter email address" required>
                            </div>
                            <div class="form-group">
                                <label for="inviteRole">Role</label>
                                <select id="inviteRole">
                                    <option value="END_USER">End User</option>
                                    <option value="SUPPORT_STAFF">Support Staff</option>
                                    <option value="TEAM_LEAD">Team Lead</option>
                                    <option value="ADMIN">Admin</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="inviteTeam">Team</label>
                                <select id="inviteTeam">
                                    <option value="">Select Team</option>
                                    <option value="engineering">Engineering Team</option>
                                    <option value="design">Design Team</option>
                                    <option value="product">Product Team</option>
                                    <option value="support">Support Team</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="inviteDepartment">Department</label>
                                <select id="inviteDepartment">
                                    <option value="">Select Department</option>
                                    <option value="engineering">Engineering</option>
                                    <option value="design">Design</option>
                                    <option value="product">Product</option>
                                    <option value="support">Support</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="inviteMember()" class="btn-primary">📧 Send Invitation</button>
                        <button onclick="closeInviteMemberModal()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Create Role Modal -->
            <div id="createRoleModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🔐 Create New Role</h2>
                        <button class="modal-close" onclick="closeCreateRoleModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="createRoleForm">
                            <div class="form-group">
                                <label for="roleName">Role Name</label>
                                <input type="text" id="roleName" placeholder="Enter role name" required>
                            </div>
                            <div class="form-group">
                                <label for="roleDescription">Description</label>
                                <textarea id="roleDescription" rows="3" placeholder="Enter role description"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Permissions</label>
                                <div class="permissions-grid">
                                    <label class="permission-item">
                                        <input type="checkbox" value="create_issues"> Create Issues
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="edit_issues"> Edit Issues
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="delete_issues"> Delete Issues
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="assign_issues"> Assign Issues
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="view_reports"> View Reports
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="manage_teams"> Manage Teams
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="manage_users"> Manage Users
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" value="admin_access"> Admin Access
                                    </label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="createRole()" class="btn-primary">🔐 Create Role</button>
                        <button onclick="closeCreateRoleModal()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Create Department Modal -->
            <div id="createDepartmentModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🏛️ Create New Department</h2>
                        <button class="modal-close" onclick="closeCreateDepartmentModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="createDepartmentForm">
                            <div class="form-group">
                                <label for="departmentName">Department Name</label>
                                <input type="text" id="departmentName" placeholder="Enter department name" required>
                            </div>
                            <div class="form-group">
                                <label for="departmentDescription">Description</label>
                                <textarea id="departmentDescription" rows="3" placeholder="Enter department description"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="departmentHead">Department Head</label>
                                <select id="departmentHead">
                                    <option value="">Select Department Head</option>
                                    <option value="admin@example.com">Admin User</option>
                                    <option value="support@example.com">Support Staff</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="departmentBudget">Budget (Optional)</label>
                                <input type="number" id="departmentBudget" placeholder="Enter budget amount">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="createDepartment()" class="btn-primary">🏛️ Create Department</button>
                        <button onclick="closeCreateDepartmentModal()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Integrations Section -->
            <div id="integrationsSection" class="content-section">
                <div class="integrations-container">
                    <div class="integrations-header">
                        <h2>🔗 Integration Hub</h2>
                        <p>Connect your issue tracker with external tools and services</p>
                    </div>

                    <!-- Integration Overview -->
                    <div class="integration-overview">
                        <div class="overview-card">
                            <div class="overview-icon">📊</div>
                            <div class="overview-content">
                                <h3>Connected Services</h3>
                                <div class="overview-number" id="connectedServices">0</div>
                            </div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-icon">🔄</div>
                            <div class="overview-content">
                                <h3>Sync Status</h3>
                                <div class="overview-number" id="syncStatus">All Good</div>
                            </div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-icon">📈</div>
                            <div class="overview-content">
                                <h3>Last Sync</h3>
                                <div class="overview-number" id="lastSync">2 min ago</div>
                            </div>
                        </div>
                    </div>

                    <!-- Available Integrations -->
                    <div class="integrations-grid">
                        <!-- GitHub Integration -->
                        <div class="integration-card" id="githubCard">
                            <div class="integration-header">
                                <div class="integration-icon">🐙</div>
                                <div class="integration-info">
                                    <h3>GitHub</h3>
                                    <p>Connect issues to GitHub repositories</p>
                                </div>
                                <div class="integration-status" id="githubStatus">
                                    <span class="status-badge disconnected">Disconnected</span>
                                </div>
                            </div>
                            <div class="integration-features">
                                <ul>
                                    <li>🔗 Link issues to GitHub repositories</li>
                                    <li>🔄 Sync issue status with GitHub issues</li>
                                    <li>📝 Auto-create GitHub issues from tracker</li>
                                    <li>🔔 GitHub webhook notifications</li>
                                </ul>
                            </div>
                            <div class="integration-actions">
                                <button onclick="connectGitHub()" class="btn-primary">🔗 Connect GitHub</button>
                                <button onclick="configureGitHub()" class="btn-secondary">⚙️ Configure</button>
                            </div>
                        </div>

                        <!-- Slack Integration -->
                        <div class="integration-card" id="slackCard">
                            <div class="integration-header">
                                <div class="integration-icon">💬</div>
                                <div class="integration-info">
                                    <h3>Slack</h3>
                                    <p>Real-time notifications and updates</p>
                                </div>
                                <div class="integration-status" id="slackStatus">
                                    <span class="status-badge disconnected">Disconnected</span>
                                </div>
                            </div>
                            <div class="integration-features">
                                <ul>
                                    <li>🔔 Real-time issue notifications</li>
                                    <li>🤖 Slack bot for issue management</li>
                                    <li>📢 Channel-based notifications</li>
                                    <li>⚡ Instant status updates</li>
                                </ul>
                            </div>
                            <div class="integration-actions">
                                <button onclick="connectSlack()" class="btn-primary">🔗 Connect Slack</button>
                                <button onclick="configureSlack()" class="btn-secondary">⚙️ Configure</button>
                            </div>
                        </div>

                        <!-- Email Integration -->
                        <div class="integration-card" id="emailCard">
                            <div class="integration-header">
                                <div class="integration-icon">📧</div>
                                <div class="integration-info">
                                    <h3>Email</h3>
                                    <p>Automated email notifications</p>
                                </div>
                                <div class="integration-status" id="emailStatus">
                                    <span class="status-badge connected">Connected</span>
                                </div>
                            </div>
                            <div class="integration-features">
                                <ul>
                                    <li>📨 Automated issue notifications</li>
                                    <li>👤 Assignment emails</li>
                                    <li>📊 Daily/weekly reports</li>
                                    <li>⚙️ Customizable templates</li>
                                </ul>
                            </div>
                            <div class="integration-actions">
                                <button onclick="configureEmail()" class="btn-primary">⚙️ Configure Email</button>
                                <button onclick="testEmail()" class="btn-secondary">📧 Test Email</button>
                            </div>
                        </div>

                        <!-- Jira Integration -->
                        <div class="integration-card" id="jiraCard">
                            <div class="integration-header">
                                <div class="integration-icon">🦘</div>
                                <div class="integration-info">
                                    <h3>Jira</h3>
                                    <p>Enterprise workflow integration</p>
                                </div>
                                <div class="integration-status" id="jiraStatus">
                                    <span class="status-badge disconnected">Disconnected</span>
                                </div>
                            </div>
                            <div class="integration-features">
                                <ul>
                                    <li>🔄 Bidirectional sync with Jira</li>
                                    <li>📋 Import Jira projects</li>
                                    <li>🔄 Status synchronization</li>
                                    <li>👥 User mapping</li>
                                </ul>
                            </div>
                            <div class="integration-actions">
                                <button onclick="connectJira()" class="btn-primary">🔗 Connect Jira</button>
                                <button onclick="configureJira()" class="btn-secondary">⚙️ Configure</button>
                            </div>
                        </div>
                    </div>

                    <!-- Integration Activity -->
                    <div class="integration-activity">
                        <h3>📊 Recent Integration Activity</h3>
                        <div class="activity-list" id="activityList">
                            <!-- Activity items will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Integration Configuration Modals -->
            
            <!-- GitHub Configuration Modal -->
            <div id="githubConfigModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🐙 GitHub Integration</h2>
                        <button class="modal-close" onclick="closeGitHubConfig()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="githubConfigForm">
                            <div class="form-group">
                                <label for="githubToken">GitHub Personal Access Token</label>
                                <input type="password" id="githubToken" placeholder="Enter your GitHub token" required>
                                <small>Create a token with repo and issues permissions</small>
                            </div>
                            <div class="form-group">
                                <label for="githubRepo">Repository</label>
                                <input type="text" id="githubRepo" placeholder="owner/repository" required>
                                <small>Format: username/repository-name</small>
                            </div>
                            <div class="form-group">
                                <label for="githubWebhook">Webhook URL</label>
                                <input type="url" id="githubWebhook" placeholder="https://your-domain.com/webhook/github">
                                <small>Optional: For real-time updates</small>
                            </div>
                            <div class="form-group">
                                <label>Sync Options</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="auto_create" checked> Auto-create GitHub issues</label>
                                    <label><input type="checkbox" value="sync_status" checked> Sync issue status</label>
                                    <label><input type="checkbox" value="sync_comments" checked> Sync comments</label>
                                    <label><input type="checkbox" value="webhook_notifications" checked> Webhook notifications</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="saveGitHubConfig()" class="btn-primary">💾 Save Configuration</button>
                        <button onclick="testGitHubConnection()" class="btn-secondary">🧪 Test Connection</button>
                        <button onclick="closeGitHubConfig()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Slack Configuration Modal -->
            <div id="slackConfigModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>💬 Slack Integration</h2>
                        <button class="modal-close" onclick="closeSlackConfig()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="slackConfigForm">
                            <div class="form-group">
                                <label for="slackToken">Slack Bot Token</label>
                                <input type="password" id="slackToken" placeholder="Enter your Slack bot token" required>
                                <small>Create a Slack app and get the bot token</small>
                            </div>
                            <div class="form-group">
                                <label for="slackChannel">Default Channel</label>
                                <input type="text" id="slackChannel" placeholder="#general" required>
                                <small>Channel for general notifications</small>
                            </div>
                            <div class="form-group">
                                <label for="slackWebhook">Webhook URL</label>
                                <input type="url" id="slackWebhook" placeholder="https://hooks.slack.com/services/...">
                                <small>Optional: For custom webhook notifications</small>
                            </div>
                            <div class="form-group">
                                <label>Notification Settings</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="issue_created" checked> Issue created</label>
                                    <label><input type="checkbox" value="issue_updated" checked> Issue updated</label>
                                    <label><input type="checkbox" value="issue_assigned" checked> Issue assigned</label>
                                    <label><input type="checkbox" value="issue_commented" checked> Issue commented</label>
                                    <label><input type="checkbox" value="daily_summary" checked> Daily summary</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="saveSlackConfig()" class="btn-primary">💾 Save Configuration</button>
                        <button onclick="testSlackConnection()" class="btn-secondary">🧪 Test Connection</button>
                        <button onclick="closeSlackConfig()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Email Configuration Modal -->
            <div id="emailConfigModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>📧 Email Configuration</h2>
                        <button class="modal-close" onclick="closeEmailConfig()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="emailConfigForm">
                            <div class="form-group">
                                <label for="emailFrom">From Email</label>
                                <input type="email" id="emailFrom" placeholder="noreply@yourcompany.com" required>
                                <small>Default sender email address</small>
                            </div>
                            <div class="form-group">
                                <label for="emailSubject">Default Subject Prefix</label>
                                <input type="text" id="emailSubject" placeholder="[Issue Tracker]" value="[Issue Tracker]">
                                <small>Prefix for all email subjects</small>
                            </div>
                            <div class="form-group">
                                <label>Email Templates</label>
                                <div class="template-group">
                                    <label>Issue Assignment Email</label>
                                    <textarea id="assignmentTemplate" rows="3" placeholder="Custom assignment email template...">Hi {{assignee_name}},

You have been assigned to issue: {{issue_title}}

Please review and update the status accordingly.

Best regards,
Issue Tracker Team</textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Notification Settings</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="assignment_emails" checked> Assignment emails</label>
                                    <label><input type="checkbox" value="status_updates" checked> Status updates</label>
                                    <label><input type="checkbox" value="daily_reports" checked> Daily reports</label>
                                    <label><input type="checkbox" value="weekly_reports" checked> Weekly reports</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="saveEmailConfig()" class="btn-primary">💾 Save Configuration</button>
                        <button onclick="testEmailConfig()" class="btn-secondary">📧 Test Email</button>
                        <button onclick="closeEmailConfig()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Jira Configuration Modal -->
            <div id="jiraConfigModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🦘 Jira Integration</h2>
                        <button class="modal-close" onclick="closeJiraConfig()">×</button>
                    </div>
                    <div class="modal-body">
                        <form id="jiraConfigForm">
                            <div class="form-group">
                                <label for="jiraUrl">Jira Instance URL</label>
                                <input type="url" id="jiraUrl" placeholder="https://yourcompany.atlassian.net" required>
                                <small>Your Jira cloud or server URL</small>
                            </div>
                            <div class="form-group">
                                <label for="jiraEmail">Jira Email</label>
                                <input type="email" id="jiraEmail" placeholder="your-email@company.com" required>
                                <small>Email used for Jira authentication</small>
                            </div>
                            <div class="form-group">
                                <label for="jiraToken">Jira API Token</label>
                                <input type="password" id="jiraToken" placeholder="Enter your Jira API token" required>
                                <small>Create an API token in your Atlassian account</small>
                            </div>
                            <div class="form-group">
                                <label for="jiraProject">Jira Project Key</label>
                                <input type="text" id="jiraProject" placeholder="PROJ" required>
                                <small>Project key (e.g., PROJ, DEV, TEST)</small>
                            </div>
                            <div class="form-group">
                                <label>Sync Options</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="bidirectional_sync" checked> Bidirectional sync</label>
                                    <label><input type="checkbox" value="sync_attachments" checked> Sync attachments</label>
                                    <label><input type="checkbox" value="sync_comments" checked> Sync comments</label>
                                    <label><input type="checkbox" value="auto_mapping" checked> Auto user mapping</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button onclick="saveJiraConfig()" class="btn-primary">💾 Save Configuration</button>
                        <button onclick="testJiraConnection()" class="btn-secondary">🧪 Test Connection</button>
                        <button onclick="closeJiraConfig()" class="btn-secondary">❌ Cancel</button>
                    </div>
                </div>
            </div>

            <!-- API Testing Section -->
            <div id="apiSection" class="content-section">
                <div class="api-container">
                    <h2>🔧 API Testing</h2>
                    <p>Test the Lambda handler endpoints locally</p>
                    
                    <div class="form-group">
                        <label for="endpoint">Endpoint:</label>
                        <select id="endpoint">
                            <option value="GET /issues">GET /issues - List Issues</option>
                            <option value="POST /issues">POST /issues - Create Issue</option>
                            <option value="GET /issues/123">GET /issues/123 - Get Issue</option>
                            <option value="PUT /issues/123">PUT /issues/123 - Update Issue</option>
                            <option value="DELETE /issues/123">DELETE /issues/123 - Delete Issue</option>
                            <option value="GET /auth/me">GET /auth/me - Get Current User</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="requestBody">Request Body (for POST/PUT):</label>
                        <textarea id="requestBody" rows="4" placeholder='{"title": "Test Issue", "description": "Test Description"}'></textarea>
                    </div>

                    <button onclick="testEndpoint()" class="btn-primary">🚀 Test Endpoint</button>

                    <div id="apiResponse" class="response" style="display: none;"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p><strong>Cloud-Native Issue Tracker</strong> - Built with ❤️ in Kenya</p>
            <p>Version 1.0.0 | Author: Vincent Wachira | Date: 12-Aug-2025</p>
            <div class="footer-links">
                <a href="#" class="footer-link">📖 Documentation</a>
                <a href="#" class="footer-link">🐛 Report Issues</a>
                <a href="#" class="footer-link">💡 Feature Requests</a>
                <a href="#" class="footer-link">📧 Contact Support</a>
            </div>
        </div>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>
